# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-14
**Phases:** 1-5
**Total Plans:** 11

## Overview

Build a Votifier-style plugin for Hytale that receives RSA-encrypted vote notifications via HTTP endpoints, leveraging the Nitrado WebServer plugin infrastructure, and fires events for other plugins to handle rewards.

## Phases

### Phase 1: Project Foundation

**Goal**: Establish Maven project with Hytale plugin structure and WebServer dependency
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:
- [x] 01-01: Maven project setup with pom.xml and dependencies
- [x] 01-02: Plugin main class and configuration loading

**Details:**
- Maven pom.xml with Java 25, HytaleServer-parent, nitrado-webserver dependencies
- manifest.json with plugin metadata (Group: Hyvote, Dependencies: Nitrado:WebServer)
- HytaleVotifierPlugin extending JavaPlugin with setup/shutdown lifecycle
- VotifierConfig record with port, debug, keyPath fields

### Phase 2: RSA Security

**Goal**: Generate and store 2048-bit RSA key pair for vote encryption
**Depends on**: Phase 1
**Plans**: 2 plans

Plans:
- [x] 02-01: RSA key pair generation and file storage
- [x] 02-02: Key loading and crypto utilities

**Details:**
- RSAKeyManager class with 2048-bit RSA key generation
- PEM file storage with PKCS8 (private) and X509 (public) encoding
- CryptoUtil with RSA/ECB/PKCS1Padding decryption (Votifier standard)
- VoteDecryptionException for crypto error handling

### Phase 3: HTTP Endpoints

**Goal**: Register HTTP endpoints with WebServer plugin for receiving votes and status checks
**Depends on**: Phase 2
**Plans**: 3 plans

Plans:
- [x] 03-01: Servlet registration with WebServer plugin
- [x] 03-02: POST endpoint for encrypted vote reception
- [x] 03-03: GET endpoint for status/health check

**Details:**
- WebServer plugin lookup via PluginManager with graceful degradation
- VoteServlet at POST /vote accepting Base64-encoded RSA-encrypted payloads
- StatusServlet at GET /status returning JSON with server info and Base64 public key
- JSON response format for all endpoints

### Phase 4: Vote Processing

**Goal**: Decrypt votes, parse Votifier fields, and fire VoteEvent via Hytale event system
**Depends on**: Phase 3
**Plans**: 2 plans

Plans:
- [x] 04-01: Vote decryption and parsing logic
- [x] 04-02: VoteEvent class and event firing

**Details:**
- Vote record with 4 Votifier protocol fields (serviceName, username, address, timestamp)
- VoteParser utility with UTF-8 decoding and newline splitting
- VoteEvent extending PluginEvent with convenience getters
- Event firing via EventRegistry.dispatchFor().dispatch()

### Phase 5: Testing & Debug

**Goal**: Provide test endpoint and /testvote command for debugging vote flow
**Depends on**: Phase 4
**Plans**: 2 plans

Plans:
- [x] 05-01: Test HTTP endpoint for debugging
- [x] 05-02: /testvote command with permission node

**Details:**
- TestVoteServlet at GET /test for browser/curl testing without encryption
- TestVoteCommand with hyvote.testvote permission for in-game testing
- Both create real VoteEvents for full integration testing

---

## Milestone Summary

**Key Decisions:**
- HTTP-only implementation (no legacy socket protocol) — simpler, leverages WebServer infrastructure
- RSA/ECB/PKCS1Padding cipher — Votifier protocol compatibility
- Java records for Vote and Config — immutability, conciseness, native Java 25
- Graceful degradation for WebServer — plugin continues without HTTP if WebServer absent
- Event firing regardless of player online status — listening plugins handle presence logic

**Issues Resolved:**
- None — clean implementation without blockers

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None — clean v1.0 implementation

---

_For current project status, see .planning/ROADMAP.md_
